<script src="https://checkout.razorpay.com/v1/checkout.js"></script>
<script>
  var options = {
    key: "<%= key_id %>",
    amount: "<%= amount %>",
    currency: "<%= currency %>",
    name: "Villa Vista Booking",
    description: "Booking for <%= listing.title || 'Property' %>",
    order_id: "<%= order_id %>",
    handler: function (response) {
      // Send payment details to backend for verification
      fetch("/payment/verify", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(response),
      })
        .then((res) => window.location.href = res.url)
        .catch((err) => console.error(err));
    },
    theme: { color: "#3399cc" }
  };

  var rzp = new Razorpay(options);
  rzp.open();
</script>
